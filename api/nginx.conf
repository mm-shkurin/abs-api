worker_processes auto;

events {
    worker_connections 1024; # Максимальное количество соединений на воркер
}

http {
    include mime.types; # Включение типов MIME
    default_type application/octet-stream;

    sendfile on; # Включение отправки файлов
    keepalive_timeout 65; # Тайм-аут соединения

    server {
        listen 80; # Слушать на 80 порту
        server_name localhost; # Измените на ваше доменное имя, если нужно

        location / {
            proxy_pass http://web:8000; # Имя сервиса из docker-compose
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        location /static/ {
            alias /api/staticfiles/; # Путь к статическим файлам
        }

        location /media/ {
            alias /api/media/; # Путь к медиа-файлам
        }
    }
}

